(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{IsFO:function(e,a,t){"use strict";t.r(a);var r=t("p0pE"),n=t.n(r),c=t("d6i3"),s=t.n(c),u=(t("miYZ"),t("tsqr")),i=(t("7DNP"),t("MJpP")),o=t("+n12"),p=function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.forEach(function(a){if(a.children){var r=a.children;delete a.children,e(r,t)}t.push(a)}),t};function l(e){if(e.length>0){var a=0,t=d(a,e);return t}return[]}function d(e,a){var t=[];return a.forEach(function(r){r.uid==e&&(r.children=d(r.id||r.key,a),t.push(r))}),t}a["default"]={namespace:"organization",state:{unit_tree:[],dept_item:{},post_item:{},user_item:{},depart_info:[],search_list:{data:[],total:0},userList_params:{page:1,pageSize:10,search:""}},effects:{fetch_import:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,c=t.call,t.put,e.next=4,c(i["o"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(u["a"].success("\u5bfc\u5165\u6210\u529f!"),!n){e.next=12;break}return e.next=12,c(n);case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_sort:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,c=t.call,t.put,e.next=4,c(i["q"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=13;break}if(!n){e.next=11;break}return e.next=11,c(n,o.value);case 11:e.next=14;break;case 13:u["a"].error(o.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 19:case"end":return e.stop()}},e,null,[[5,16]])}),fetch_getOrganizationTree_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,c=t.call,o=t.put,e.next=4,c(i["m"],r);case 4:if(p=e.sent,console.log(p),e.prev=6,0!==p.status){e.next=15;break}return e.next=10,o({type:"unit_tree",payload:p.value});case 10:if(!n){e.next=13;break}return e.next=13,c(n,p.value);case 13:e.next=16;break;case 15:u["a"].error(p.message);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](6),console.log(e.t0),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 22:case"end":return e.stop()}},e,null,[[6,18]])}),fetch_dept_item:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["h"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=12;break}return e.next=10,c({type:"dept_item",payload:o.value});case 10:e.next=13;break;case 12:u["a"].error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 18:case"end":return e.stop()}},e,null,[[5,15]])}),fetch_post_item:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["p"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=12;break}return e.next=10,c({type:"post_item",payload:o.value});case 10:e.next=13;break;case 12:u["a"].error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 18:case"end":return e.stop()}},e,null,[[5,15]])}),fetch_user_item:s.a.mark(function e(a,t){var r,n,c,o,p,l;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,a.params,c=t.call,o=t.put,e.next=4,c(i["v"],r);case 4:if(p=e.sent,e.prev=5,l=p.status,0!==l){e.next=15;break}return e.next=10,o({type:"user_item",payload:p.value});case 10:if(!n){e.next=13;break}return e.next=13,c(n,p.value);case 13:e.next=16;break;case 15:u["a"].error(p.message);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](5),console.log(e.t0),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 22:case"end":return e.stop()}},e,null,[[5,18]])}),fetch_getOrganizationItem_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["l"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=12;break}return e.next=10,c({type:"depart_info",payload:o.value});case 10:e.next=13;break;case 12:u["a"].error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 18:case"end":return e.stop()}},e,null,[[5,15]])}),fetch_getAddOriginTemplate_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["i"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=12;break}return e.next=10,c({type:"depart_info",payload:o.value});case 10:e.next=13;break;case 12:u["a"].error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 18:case"end":return e.stop()}},e,null,[[5,15]])}),fetch_getAddUserTeplate_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["j"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=12;break}return e.next=10,c({type:"depart_info",payload:o.value});case 10:e.next=13;break;case 12:u["a"].error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 18:case"end":return e.stop()}},e,null,[[5,15]])}),fetch_getUserList_action:s.a.mark(function e(a,t){var r,n,c,o;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["n"],r);case 4:if(o=e.sent,e.prev=5,0!==o.status){e.next=11;break}return e.next=9,c({type:"search_list",payload:{response:o.value,params:r}});case 9:e.next=12;break;case 11:u["a"].error(o.message);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 17:case"end":return e.stop()}},e,null,[[5,14]])}),fetch_delorg:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.params,n=a.callback,c=t.call,t.put,e.next=4,c(i["g"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(u["a"].success("\u5220\u9664\u6210\u529f"),!n){e.next=12;break}return e.next=12,c(n,o);case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_delOriganization_action:s.a.mark(function e(a,t){var r,n,c,o,p,l;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.params,n=a.callback,c=t.call,o=t.put,e.next=4,c(i["d"],r);case 4:if(p=e.sent,e.prev=5,l=p.status,0!==l){e.next=16;break}return u["a"].success("\u5220\u9664\u6210\u529f"),e.next=11,o({type:"DEL_UNIT_ACTION",payload:r});case 11:if(!n){e.next=14;break}return e.next=14,c(n,p);case 14:e.next=17;break;case 16:u["a"].error(p.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 22:case"end":return e.stop()}},e,null,[[5,19]])}),fetch_delPostAction_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.params,n=a.callback,c=t.call,t.put,e.next=4,c(i["e"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(u["a"].success("\u5220\u9664\u6210\u529f"),!n){e.next=12;break}return e.next=12,c(n,o);case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_delUser_action:s.a.mark(function e(a,t){var r,n,c,o,p,l;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.params,n=a.callback,c=t.call,o=t.put,e.next=4,c(i["f"],r);case 4:if(p=e.sent,e.prev=5,l=p.status,0!==l){e.next=16;break}return u["a"].success("\u5220\u9664\u6210\u529f"),e.next=11,o({type:"DEL_USER_ACTION",payload:r});case 11:if(!n){e.next=14;break}return e.next=14,c(n,p);case 14:e.next=17;break;case 16:u["a"].error(p.message);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](5),console.log(e.t0),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 23:case"end":return e.stop()}},e,null,[[5,19]])}),fetch_addPostAction_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,a.params,c=t.call,t.put,e.next=4,c(i["b"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(u["a"].success("\u6dfb\u52a0\u6210\u529f"),!n){e.next=12;break}return e.next=12,c(n,o);case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_addUser_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["c"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=13;break}return u["a"].success("\u6dfb\u52a0\u6210\u529f"),e.next=11,c({type:"ADD_USER_ACTION",payload:o.value});case 11:e.next=14;break;case 13:u["a"].error(o.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 19:case"end":return e.stop()}},e,null,[[5,16]])}),fetch_updateUserPassword_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,c=t.call,t.put,e.next=4,c(i["u"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(!n){e.next=11;break}return e.next=11,c(n,o);case 11:u["a"].success(o.message),e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_addOriganization_action:s.a.mark(function e(a,t){var r,n,c,o,p,l;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,a.params,c=t.call,o=t.put,e.next=4,c(i["a"],r);case 4:if(p=e.sent,e.prev=5,l=p.status,0!==l){e.next=16;break}return u["a"].success("\u65b0\u589e\u6210\u529f"),e.next=11,o({type:"ADD_UNIT_ACTION",payload:p.value});case 11:if(!n){e.next=14;break}return e.next=14,c(n,p);case 14:e.next=17;break;case 16:u["a"].error(p.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 22:case"end":return e.stop()}},e,null,[[5,19]])}),fetch_updatePostAction_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,a.params,c=t.call,t.put,e.next=4,c(i["s"],r);case 4:if(o=e.sent,e.prev=5,p=o.status,0!==p){e.next=14;break}if(u["a"].success("\u4fdd\u5b58\u6210\u529f"),!n){e.next=12;break}return e.next=12,c(n,o,r);case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 20:case"end":return e.stop()}},e,null,[[5,17]])}),fetch_updateUser_action:s.a.mark(function e(a,t){var r,n,c,o,p,l;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=a.callback,a.params,c=t.call,o=t.put,e.next=4,c(i["t"],r);case 4:if(p=e.sent,e.prev=5,l=p.status,0!==l){e.next=16;break}return u["a"].success("\u4fdd\u5b58\u6210\u529f"),e.next=11,o({type:"reload_tree",payload:{id:r.id,targetID:r.unit_ids,data:r}});case 11:if(!n){e.next=14;break}return e.next=14,c(n,p,r);case 14:e.next=17;break;case 16:u["a"].error(p.message);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](5),console.log(e.t0),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 23:case"end":return e.stop()}},e,null,[[5,19]])}),fetch_updateOriganization_action:s.a.mark(function e(a,t){var r,n,c,o,p;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,a.params,n=t.call,c=t.put,e.next=4,n(i["r"],r);case 4:if(o=e.sent,console.log(r),e.prev=6,p=o.status,0!==p){e.next=14;break}return u["a"].success("\u4fdd\u5b58\u6210\u529f"),e.next=12,c({type:"reload_tree",payload:{id:r.id,targetID:r.pid,data:r}});case 12:e.next=15;break;case 14:u["a"].error(o.message);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](6),console.log(e.t0),u["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 21:case"end":return e.stop()}},e,null,[[6,17]])})},reducers:{reset:function(e,a){a.payload;return{unit_tree:[],dept_item:{},post_item:{},user_item:{},depart_info:[],search_list:{data:[],total:0},userList_params:{page:1,pageSize:10,search:""}}},unit_tree1:function(e,a){var t=a.payload,r=e.unit_tree,c=Object(o["w"])(r,t.response,t.uid);return e.unit_tree=c,n()({},e,{unit_tree:t})},unit_tree:function(e,a){var t=a.payload;return n()({},e,{unit_tree:t})},dept_item:function(e,a){var t=a.payload,r=e.dept_item;return r[t.id]=t,n()({},e)},post_item:function(e,a){var t=a.payload,r=e.post_item;return r[t.id]=t,n()({},e)},user_item:function(e,a){var t=a.payload,r=e.user_item;return r[t.id]=t,n()({},e)},depart_info:function(e,a){var t=a.payload;return n()({},e,{depart_info:t})},reload_tree:function(e,a){var t=a.payload,r=t.targetID,c=t.data,s=e.unit_tree,u=p(s),i=u.map(function(e){return e.key===c.id?{title:c.name,uid:r,isLeaf:e.isLeaf,type:e.type,key:e.key}:e}),o=l(i.map(function(e){return e.uid?e:n()({},e,{uid:0})}));return n()({},e,{unit_tree:o,depart_info:t})},search_list:function(e,a){var t=a.payload;return n()({},e,{search_list:t.response,userList_params:t.params})},DEL_USER_ACTION:function(e,a){var t=a.payload,r=p(e.unit_tree);console.log(t),console.log(r);var c=r.filter(function(e){return e.key!==t.id}),s=l(c.map(function(e){return e.uid?e:n()({},e,{uid:0})}));return console.log(s),n()({},e,{unit_tree:s})},DEL_UNIT_ACTION:function(e,a){var t=a.payload,r=p(e.unit_tree);console.log(t),console.log(r);var c=r.filter(function(e){return e.key!==t.id});c.filter(function(e){return e.uid!==t.id});var s=l(c.map(function(e){return e.uid?e:n()({},e,{uid:0})}));return console.log(s),n()({},e,{unit_tree:s})},ADD_USER_ACTION:function(e,a){var t=a.payload,r=p(e.unit_tree);r.push({isLeaf:!0,type:"USER",key:t.id,uid:t.unit.id,title:t.name});var c=l(r.map(function(e){return e.uid?e:n()({},e,{uid:0})}));return n()({},e,{unit_tree:c})},ADD_UNIT_ACTION:function(e,a){var t=a.payload,r=p(e.unit_tree);r.push({title:t.name,type:"UNIT",key:t.id,uid:t.pid,isLeaf:!0}),console.log(r);var c=l(r.map(function(e){return e.uid?e:n()({},e,{uid:0})}));return console.log(c),n()({},e,{unit_tree:c})}}}}}]);