(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{OqMM:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,n,r,i,s=t("bx4M"),o=(t("iQDF"),t("+eQT")),c=t("jehZ"),m=t.n(c),p=(t("5NDa"),t("5rEg")),u=(t("DZo9"),t("8z0m")),d=(t("+L6B"),t("2/Rp")),g=(t("miYZ"),t("tsqr")),h=t("p0pE"),f=t.n(h),E=t("2Taf"),v=t.n(E),b=t("vZ4D"),y=t.n(b),w=t("l4Ni"),V=t.n(w),j=t("ujKo"),O=t.n(j),x=t("MhPg"),D=t.n(x),F=(t("7Kak"),t("9yH6")),k=(t("y8nQ"),t("Vl3Y")),M=(t("OaEy"),t("2fM7")),P=t("q1tI"),C=t.n(P),q=t("MuoO"),I=t("+n12"),T=t("34ay"),U=t("mJrq"),Y=t.n(U),S=t("wd/R"),_=t.n(S),A=t("wbS+"),Q=t("k3xQ"),Z=t.n(Q),z=(t("t3Un"),M["a"].Option),J=k["a"].Item,N=(F["a"].Group,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}}),R=(l=k["a"].create(),n=Object(q["connect"])(function(e){var a=e.personal,t=e.config,l=e.loading;return{personal:a,config:t,loading:l.models.personal}}),l(r=n((i=function(e){function a(){var e,t;v()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=V()(this,(e=O()(a)).call.apply(e,[this].concat(n))),t.state={},t.fileChange=function(e){var a=e&&e.file;console.log(e),a.response&&0===a.response.status&&t.setState({file:a.response&&a.response.value||{}})},t.handleSubmit=function(e){var a=t.props,l=a.form.validateFields,n=a.dispatch,r=t.state,i=r.file,s=r.newFile;l(function(e,a){if(e)console.log(e);else if(i||s){var t=Object(T["a"])().id;a.birthday=a.birthday&&_()(a.birthday).format("YYYY/MM/DD")||void 0,a.imagePath=i||s||void 0,a.id=t,n({type:"personal/fetch_updPersonalUserItem",payload:f()({},a),callback:function(e){var a=Object(T["a"])().id;n({type:"global/fetch_getUserItem",payload:{id:a}})}})}else g["a"].error("\u8bf7\u4fee\u6539\u5934\u50cf")})},t}return D()(a,e),y()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.dispatch,t=Object(T["a"])().id;a({type:"personal/fetch_getPersonalUserItem",payload:{id:t},callback:function(a){0===a.status&&e.setState({newFile:a.value.imagePath})}})}},{key:"render",value:function(){var e=this.props,a=e.personal.personal_user_item,t=e.form.getFieldDecorator,l=(e.loading,this.state.file);return C.a.createElement(P["Fragment"],null,C.a.createElement(s["a"],{bordered:!1,style:{height:"92vh"}},C.a.createElement("div",{style:{width:400,margin:"0 auto"}},C.a.createElement("div",{style:{margin:12,textAlign:"center"}},C.a.createElement("img",{src:l?Object(I["e"])(l):a&&a.imagePath?Object(I["e"])(a.imagePath):Y.a,alt:"",style:{height:100,width:100,borderRadius:"50%"}}),C.a.createElement("div",{style:{marginTop:12}},C.a.createElement(u["a"],{onChange:this.fileChange,name:"file",accept:".jpg,.jpeg,.png",action:Object(I["e"])("/api/file/upload?fileType=5"),showUploadList:!1,beforeUpload:I["c"],headers:{Authorization:I["v"]}},C.a.createElement(d["a"],{type:"primary"},"\u66f4\u6362\u5934\u50cf"))))),C.a.createElement(k["a"],{className:Z.a.personalFormWarp},C.a.createElement(J,m()({label:"\u59d3\u540d"},N),t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{min:2,message:"\u59d3\u540d\u957f\u5ea6\u9700\u8981\u57282\u548c20\u4e4b\u95f4"},{max:20,message:"\u59d3\u540d\u957f\u5ea6\u9700\u8981\u57282\u548c20\u4e4b\u95f4"}],initialValue:a&&a.name,getValueFromEvent:function(e){return e.target.value.replace(" ","")}})(C.a.createElement(p["a"],null))),C.a.createElement(J,m()({label:"\u6027\u522b"},N),t("gender",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}],initialValue:a&&a.gender})(C.a.createElement(M["a"],{placeholder:"\u8bf7\u9009\u62e9\u6027\u522b"},C.a.createElement(z,{value:"\u7537"},"\u7537"),C.a.createElement(z,{value:"\u5973"},"\u5973")))),C.a.createElement(J,m()({},N,{label:"\u751f\u65e5"}),t("birthday",{initialValue:a&&_()(a.startTime)||void 0})(C.a.createElement(o["a"],{placeholder:"\u8bf7\u9009\u62e9"}))),C.a.createElement(J,m()({label:"\u5e74\u9f84"},N),t("age",{rules:[{max:3,message:"\u957f\u5ea6\u9650\u5b9a\u4e3a3"}],initialValue:a&&a.age,getValueFromEvent:function(e){return e.target.value.replace(/\D/g,"")}})(C.a.createElement(p["a"],{type:"text"}))),C.a.createElement(J,m()({label:"\u624b\u673a\u53f7"},N),t("telephone",{rules:[{pattern:I["m"],message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"}],initialValue:a&&a.telephone,getValueFromEvent:function(e){return e.target.value.replace(/\D/g,"")}})(C.a.createElement(p["a"],{type:"text"}))),C.a.createElement(J,m()({label:"\u90ae\u7bb1"},N),t("email",{rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u53f7"}],initialValue:a&&a.email})(C.a.createElement(p["a"],null))),C.a.createElement(J,m()({label:"\u5730\u5740"},N),t("address",{rules:[{validator:I["y"]}],initialValue:a&&a.address})(C.a.createElement(p["a"],null))),C.a.createElement(J,m()({label:"\u6240\u5728\u90e8\u95e8"},N),t("unit",{initialValue:a&&a.unit.name})(C.a.createElement(A["a"],{disabled:!0})))),C.a.createElement("div",{style:{marginTop:24,textAlign:"center"}},C.a.createElement(d["a"],{onClick:this.handleSubmit,type:"primary"},"\u4fdd\u5b58"))))}}]),a}(P["PureComponent"]),r=i))||r)||r);a["default"]=R}}]);