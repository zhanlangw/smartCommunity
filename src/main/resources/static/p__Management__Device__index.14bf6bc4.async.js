(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{E0WQ:function(e,t,a){"use strict";a.r(t);a("T2oS");var l,n,r,i,d=a("W9HT"),c=(a("5Dmo"),a("3S7+")),s=a("p0pE"),o=a.n(s),u=(a("2qtc"),a("kLXV")),m=(a("14J3"),a("BMrR")),p=(a("jCWc"),a("kPKH")),v=a("jehZ"),E=a.n(v),f=(a("+L6B"),a("2/Rp")),h=a("2Taf"),y=a.n(h),g=a("vZ4D"),I=a.n(g),b=a("l4Ni"),k=a.n(b),V=a("ujKo"),x=a.n(V),S=a("MhPg"),A=a.n(S),w=(a("y8nQ"),a("Vl3Y")),O=(a("OaEy"),a("2fM7")),U=(a("5NDa"),a("5rEg")),C=(a("tU7J"),a("wFql")),D=a("q1tI"),P=a.n(D),R=a("MuoO"),q=a("VwEk"),L=a("+n12"),T=a("wbS+"),M=a("xNuS"),N=C["a"].Text,_=(U["a"].TextArea,O["a"].Option),B={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},F={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},j={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},J=(l=w["a"].create(),n=Object(R["connect"])(function(e){var t=e.device,a=e.loading;return{device:t,loading:a.models.device}}),l(r=n((i=function(e){function t(){var e,a;y()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=k()(this,(e=x()(t)).call.apply(e,[this].concat(n))),a.state={deviceAddOrUpdModelVisible:!1,deviceAddOrUpd:!0},a.handelDeviceAddOrUpd=function(){var e=a.state,t=e.deviceAddOrUpd,l=e.deviceUpdId,n=e.unitId,r=a.props,i=r.form,d=i.validateFields,c=i.resetFields,s=r.dispatch;d(function(e,r){e||(t?s({type:"device/fetch_addDeviceItem",payload:r,callback:function(e){0===e.status&&a.setState({deviceAddOrUpdModelVisible:!1},function(){a.onRef.setState({start:1}),c()})}}):(r.id=l,r.unitId=n.id,s({type:"device/fetch_updDeviceItem",payload:r,callback:function(e){0===e.status&&a.setState({deviceAddOrUpdModelVisible:!1},function(){a.onRef.setState({start:1}),c()})}})))})},a.deviceAddOrUpdModel=function(){var e=a.state,t=e.deviceAddOrUpdModelVisible,l=e.deviceAddOrUpd,n=a.props,r=n.form.getFieldDecorator,i=n.device.device_item;return P.a.createElement(u["a"],{title:l?"\u65b0\u5efa\u6444\u50cf\u673a":"\u4fee\u6539\u6444\u50cf\u673a",visible:t,width:1150,onCancel:function(){return a.setState({deviceAddOrUpdModelVisible:!1})},footer:[P.a.createElement(f["a"],{key:"submit",type:"primary",onClick:a.handelDeviceAddOrUpd,style:{marginRight:15}},"\u786e\u5b9a"),P.a.createElement(f["a"],{key:"back",onClick:function(){return a.setState({deviceAddOrUpdModelVisible:!1})}},"\u53d6\u6d88")]},P.a.createElement(w["a"],null,P.a.createElement(m["a"],null,P.a.createElement(p["a"],{span:12},P.a.createElement(w["a"].Item,E()({},B,{label:"\u6444\u50cf\u673a\u540d\u79f0"}),r("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u540d\u79f0"},{validator:L["x"]}],initialValue:l?void 0:i&&i.name||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u540d\u79f0"}))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u5730\u7406\u4f4d\u7f6e"}),r("address",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u7406\u4f4d\u7f6e"},{validator:L["y"]}],initialValue:l?void 0:i&&i.address||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u5730\u7406\u4f4d\u7f6e"}))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u5173\u8054\u8857\u533a"}),r("unitId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5173\u8054\u8857\u533a"}],initialValue:l?void 0:i&&i.unit&&i.unit.name||void 0})(P.a.createElement(T["a"],{placeholder:"\u8bf7\u9009\u62e9\u5173\u8054\u8857\u533a",onChange:function(e){return a.setState({unitId:{id:e}})}}))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u6444\u50cf\u673a\u7c7b\u578b"}),r("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6444\u50cf\u673a\u7c7b\u578b"}],initialValue:l?void 0:i&&i.type||void 0})(P.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9\u6444\u50cf\u673a\u7c7b\u578b"},P.a.createElement(_,{value:"BALL"},"\u7403\u673a"),P.a.createElement(_,{value:"GUN"},"\u67aa\u673a")))),P.a.createElement(w["a"].Item,E()({},B,{label:"IP\u5730\u5740",style:{margin:0}}),r("ip",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165IP\u5730\u5740"},{pattern:L["n"],message:"\u8bf7\u53c2\u8003\u6a21\u677f\u8f93\u5165\u6b63\u786eIP\u5730\u5740"}],initialValue:l?void 0:i&&i.ip||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165IP\u5730\u5740"})),P.a.createElement(N,{type:"secondary"},"\u53c2\u8003\u6a21\u677f: 192.168.1.100")),P.a.createElement(w["a"].Item,E()({},B,{label:"RTSP\u5730\u5740"}),r("rtspAddress",{initialValue:l?void 0:i&&i.rtspAddress||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165RTSP\u5730\u5740"}))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u7528\u6237\u540d"}),r("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{validator:L["x"]}],initialValue:l?void 0:i&&i.username||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})))),P.a.createElement(p["a"],{span:12},P.a.createElement(w["a"].Item,E()({},B,{label:"\u6444\u50cf\u673a\u7f16\u53f7"}),r("num",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u7f16\u53f7"},{max:20,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc720"}],initialValue:l?void 0:i&&i.num||void 0,getValueFromEvent:function(e){return e.target.value.replace(/\D/g,"")}})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u7f16\u53f7"}))),P.a.createElement(m["a"],{span:24,style:{left:72}},P.a.createElement(p["a"],{span:10},P.a.createElement(w["a"].Item,E()({},F,{label:"\u7ecf\u5ea6"}),r("longitude",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ecf\u5ea6\u5750\u6807"},{pattern:/^-?((0|1?[0-7]?[0-9]?)(([.][0-9]{1,6})?)|180(([.][0]{1,6})?))$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7ecf\u5ea6\u5750\u6807"}],initialValue:l?void 0:i&&i.longitude||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ecf\u5ea6\u5750\u6807"})))),P.a.createElement(p["a"],{span:10,style:{left:"-7px"}},P.a.createElement(w["a"].Item,E()({},F,{label:"\u7eac\u5ea6"}),r("latitude",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7eac\u5ea6\u5750\u6807"},{pattern:/^-?((0|[1-8]?[0-9]?)(([.][0-9]{1,6})?)|90(([.][0]{1,6})?))$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7eac\u5ea6\u5750\u6807"}],initialValue:l?void 0:i&&i.latitude||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165\u7eac\u5ea6\u5750\u6807"}))))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u5382\u5546"}),r("vendor",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5382\u5546"}],initialValue:l?void 0:i&&i.vendor||void 0})(P.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9\u5382\u5546"},P.a.createElement(_,{value:"1"},"\u5927\u534e"),P.a.createElement(_,{value:"2"},"\u6d77\u5eb7"),P.a.createElement(_,{value:"3"},"\u5b87\u89c6"),P.a.createElement(_,{value:"4"},"\u5929\u5730\u4f1f\u4e1a")))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u6444\u50cf\u673a\u529f\u80fd"}),r("features",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u529f\u80fd"}],initialValue:l?void 0:i&&i.features||void 0})(P.a.createElement(O["a"],{placeholder:"\u8bf7\u8f93\u5165\u6444\u50cf\u673a\u529f\u80fd"},P.a.createElement(_,{value:"INTELLIGENT"},"\u667a\u80fd"),P.a.createElement(_,{value:"ORDINARY"},"\u666e\u901a")))),P.a.createElement(m["a"],{span:24,style:{left:72}},P.a.createElement(p["a"],{span:10},P.a.createElement(w["a"].Item,E()({},j,{label:"TCP\u7aef\u53e3"}),r("tcpPort",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165TCP\u7aef\u53e3\u53f7"}],initialValue:l?void 0:i&&i.tcpPort||void 0,getValueFromEvent:function(e){return e.target.value.replace(/\D/g,"")}})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165TCP\u7aef\u53e3\u53f7"})))),P.a.createElement(p["a"],{span:10,style:{left:"-7px"}},P.a.createElement(w["a"].Item,E()({},F,{label:"\u72b6\u6001"}),r("status",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3\u53f7"}],initialValue:l?void 0:i&&i.status||void 0})(P.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001"},P.a.createElement(_,{value:"ONLINE"},"\u5728\u7ebf"),P.a.createElement(_,{value:"LESS"},"\u79bb\u7ebf")))))),P.a.createElement(w["a"].Item,E()({},B,{label:"RTSP\u7aef\u53e3\u53f7"}),r("rtspPort",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165RTSP\u7aef\u53e3\u53f7"},{validator:L["y"]}],initialValue:l?void 0:i&&i.rtspPort||void 0})(P.a.createElement(U["a"],{placeholder:"\u8bf7\u8f93\u5165RTSP\u7aef\u53e3\u53f7"}))),P.a.createElement(w["a"].Item,E()({},B,{label:"\u5bc6\u7801"}),r("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],initialValue:l?void 0:i&&i.password||void 0})(P.a.createElement(U["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))))))},a.handleDeviceAppButton=function(){a.setState({deviceAddOrUpdModelVisible:!0,deviceAddOrUpd:!0})},a.handleDeviceUpdButton=function(e){var t=a.props.dispatch;a.setState({deviceUpdId:e,deviceAddOrUpd:!1,deviceAddOrUpdModelVisible:!0}),t({type:"device/fetch_getDeviceItem",payload:{id:e},callback:function(e){0===e.status&&a.setState({unitId:e.value.unit})}})},a.setOnRef=function(e){a.onRef=e},a.handleClickReset=function(){a.onRef.handleClickReset()},a}return A()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"device/fetch_getDeviceList",payload:o()({},L["l"])}),e({type:"global/fetch_get_tree"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.device.device_list,l=t.loading,n=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",width:110,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},e))}},{title:"\u7f16\u53f7",dataIndex:"num",key:"num",width:80,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},e))}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:80,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:"LESS"===e?"\u6389\u7ebf":"\u5728\u7ebf"},P.a.createElement("span",{style:{padding:"5px 10px",borderRadius:5,color:"#fff",display:"inline-block",fontSize:12,backgroundColor:"LESS"===e?"#21C6C0":"#3A87E4"}},"LESS"===e?"\u6389\u7ebf":"\u5728\u7ebf")))}},{title:"\u5730\u7406\u4f4d\u7f6e",dataIndex:"address",key:"address",width:120,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},P.a.createElement("span",null,e)))}},{title:"\u5750\u6807",dataIndex:"coordinates",key:"coordinates",width:170,render:function(e,t){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:"\u4e1c\u7ecf".concat(t.longitude,"\u5ea6,\u5317\u7eac").concat(t.latitude,"\u5ea6")},"\u4e1c\u7ecf",t.longitude,"\u5ea6,\u5317\u7eac",t.latitude,"\u5ea6"))}},{title:"\u5173\u8054\u8857\u533a",dataIndex:"unitName",key:"unitName",width:110,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},e))}},{title:"\u6444\u50cf\u673a\u529f\u80fd",dataIndex:"features",key:"features",width:80,render:function(e,t){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},P.a.createElement(N,null,"INTELLIGENT"===e?"\u667a\u80fd":"\u666e\u901a")))}},{title:"\u6444\u50cf\u673a\u7c7b\u578b",dataIndex:"type",key:"type",width:80,render:function(e,t){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},P.a.createElement(N,null,"BALL"===e?"\u7403\u673a":"\u67aa\u673a")))}},{title:"IP\u5730\u5740",dataIndex:"ip",key:"ip",width:110,render:function(e){return P.a.createElement(M["a"],{lines:1},P.a.createElement(c["a"],{title:e},e))}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"id",width:80,render:function(t,a){return P.a.createElement(f["a"],{type:"primary",onClick:function(){return e.handleDeviceUpdButton(t)}},"\u4fee\u6539")}}];return P.a.createElement("div",{style:{backgroundColor:" #ffffff",minHeight:"91vh"}},P.a.createElement(f["a"],{type:"primary",style:{margin:"12px 10px 8px"},onClick:this.handleDeviceAppButton},"\u65b0\u5efa\u6444\u50cf\u673a"),P.a.createElement(d["a"],{spinning:l},P.a.createElement(q["a"],{columns:n,dataSource:a,type:"device/fetch_getDeviceList",delButton:"device/fetch_delDeviceItem",onRef:this.setOnRef,filter:!0})),this.state.deviceAddOrUpdModelVisible&&this.deviceAddOrUpdModel())}}]),t}(D["PureComponent"]),r=i))||r)||r);t["default"]=J}}]);